---
layout: post
title: Steps for making WAMP server work with SSL
date: '2013-02-26T11:52:00.001-05:00'
author: Brett Koenig
tags:
- WAMP
- SSL
- Apache2
modified_time: '2013-02-26T12:03:42.935-05:00'
permalink: :year/:month/:slug
---

<div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><div>I recently had to help some team members that were using WAMP in their development environment set up SSL on their localhost. &nbsp;Since I was using a LAMP stack in my development environment, I had to do some searching and not one website I came accross had instructions that actually worked. &nbsp;Here is what worked on my test WAMP setup and for my team members. &nbsp;This was using Windows 7 &amp; 8, WampServer 2.2E, and Apache 2.4 on 64-bit machines. &nbsp;I include this information just to inform you that by the time you read it, if it doesn't work, it may be because the technologies have changed. &nbsp;Anywho, here are the 24 easy steps!<br /><br /><a name='more'></a><br /></div><ol><li>Make sure you have openssl installed.&nbsp; I think it might come with&nbsp;<span class="il" style="background-color: #ffffcc;">WAMP</span>&nbsp;server because I don't recall installing it but I had it.&nbsp; Maybe it comes with Windows Power Shell 2, not sure. Anyways go to the command line and type "openssl version".&nbsp; If you get a response then all is good. If not figure out how to download it and set it up so that that command works.</li><br /><li>Go to "<span class="il" style="background-color: #ffffcc;">wamp</span>\bin\apache\apache2.4.2\<wbr></wbr>bin" using either power shell or cmd.</li><br /><li>Type "openssl genrsa -aes256 -out pass.key 2048".&nbsp; The out&nbsp;argument can be whatever you want.&nbsp; If you don't want to think about what the commands are doing just use "pass.key" because that is what I will use in the next step.&nbsp; After you type this you will have to enter a password and confirm it.&nbsp; Choose anything.&nbsp; You will only need it in the next step so don't worry, you don't have to remember it long.</li><br /><li>Type "openssl rsa -in pass.key -out localhost.key".&nbsp; Once again the out&nbsp;argument&nbsp;is up to you and make sure the in argument matches the out argument from the previous step.&nbsp; You will have to enter the password from the previous step after hitting enter.</li><br /><li>Type "openssl req -new -x509 -nodes -sha1 -key localhost.key -out localhost.crt -days 365 -config C:\<span class="il" style="background-color: #ffffcc;">wamp</span>\bin\apache\apache2.4.<wbr></wbr>2\conf\openssl.cnf".&nbsp; The key argument is whatever you named the out argument on the previous step.&nbsp; I'm sure you got the deal with the out argument by now.&nbsp; I set my certificate to last for 365 days.&nbsp; That means in a year I will have to do this step again but I'm sure we won't be working on this anymore so it really doesn't matter.</li><br /><li>Alright we are done with the command line for now.&nbsp; Open 2 file browsers.&nbsp; The first one to "<span class="il" style="background-color: #ffffcc;">wamp</span>\bin\apache\apache2.4.2\<wbr></wbr>bin" and the second to "<span class="il" style="background-color: #ffffcc;">wamp</span>\bin\apache\2.4.2\conf".</li><br /><li>In the conf directory create a folder called "<span class="il" style="background-color: #ffffcc;">ssl</span>".</li><br /><li>Copy and paste "localhost.key" and "localhost.cry" to the "<span class="il" style="background-color: #ffffcc;">ssl</span>" folder.</li><br /><li>Inside the "<span class="il" style="background-color: #ffffcc;">ssl</span>" folder create a folder called "logs".</li><br /><li>Now comes the fun part of updating configure files.&nbsp; I hope I can remember every line that I changed.&nbsp; Go back one level to the "conf" directory and then go into the "extra" directory.</li><br /><li>Open "httpd-<span class="il" style="background-color: #ffffcc;">ssl</span>.conf" in your favorite text editor.</li><br /><li>Uncomment the line starting with "SSLSessionCache" and change the location to be "shmcb:c:/<span class="il" style="background-color: #ffffcc;">wamp</span>/bin/apache/<wbr></wbr>apache2.4.2/logs/ssl_scache(<wbr></wbr>512000)".&nbsp; I don't know how to write this to be perfectly clear but make sure in the actual configure file the quotes are around the location.</li><br /><li>In the "&lt;VirtualHost _default_:443&gt;" area we are going to have to update all that information to point to our actual location of stuff. So change "DocumentRoot" to "c:/<span class="il" style="background-color: #ffffcc;">wamp</span>/www". Make sure that you have the actual quotes around all of these like the values do that you are changing.</li><br /><li>Change "ServerName" to "localhost:443.</li><br /><li>Change "ErrorLog" to "c:/<span class="il" style="background-color: #ffffcc;">wamp</span>/bin/apache/apache2.4.<wbr></wbr>2/conf/<span class="il" style="background-color: #ffffcc;">ssl</span>/logs/error.log"</li><br /><li>Change "TransferLog" to "c:/<span class="il" style="background-color: #ffffcc;">wamp</span>/bin/apache/apache2.4.<wbr></wbr>2/conf/<span class="il" style="background-color: #ffffcc;">ssl</span>/logs/access.log".</li><br /><li>Change "SSLCertificateFile" to "c:/<span class="il" style="background-color: #ffffcc;">wamp</span>/bin/apache/apache2.4.<wbr></wbr>2/conf/<span class="il" style="background-color: #ffffcc;">ssl</span>/localhost.crt".</li><br /><li>Change "SSLCertificateKeyFile" to "c:/<span class="il" style="background-color: #ffffcc;">wamp</span>/bin/apache/apache2.4.<wbr></wbr>2/conf/<span class="il" style="background-color: #ffffcc;">ssl</span>/localhost.key".</li><br /><li>Go to the part where it says "&lt;Directory ...&gt;". I can't remember what the default value is but change it to be '&lt;Directory "c:/<span class="il" style="background-color: #ffffcc;">wamp</span>/www"&gt;'</li><br /><li>Last things to change in this configure file.&nbsp; Change "CustomLog" to point to the log folder we created.&nbsp; So it should be "c:/<span class="il" style="background-color: #ffffcc;">wamp</span>/bin/apache/apache2.4.<wbr></wbr>2/conf/<span class="il" style="background-color: #ffffcc;">ssl</span>/logs/ssl_request.<wbr></wbr>log".&nbsp; Leave the "\" and everything after it the same.</li><br /><li>We need to enable two apache modules.&nbsp; You can do this using the system tray or&nbsp;going up one directory from&nbsp;"extra" and editing the "httpd.conf" file.&nbsp; The first module you need to enable is the "ssl_module" (uncomment that line in the conf) or "mod_ssl" if you are going the system tray route.</li><br /><li>Also enable the "socache_shmcb_module".</li><br /><li>Finally uncomment the line that says "Include conf/extra/httpd-<span class="il" style="background-color: #ffffcc;">ssl</span>.conf".</li><br /><li>We are almost there as long as I didn't miss a step.&nbsp; Go back to the command line and type "./httpd -t" and hopefully you get "syntax ok".&nbsp; If you do restart the apache server and&nbsp;<span class="il" style="background-color: #ffffcc;">SSL</span>&nbsp;should work for you.&nbsp; If not we will start debugging.</li></ol><div>LAMP servers seem to be a bit better documented but if I ever have to set it up again or help someone else set it up I will post the steps here. &nbsp;They should be quite similar.</div></div>